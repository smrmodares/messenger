{% extends "layout.html" %}

{% block title %}
    {{book.title}}
{% endblock %}

{% block main %}
    <h1>{{book.title}}</h1>

    <p><strong>Author:</strong> {{book.author}}</p>
    <p><strong>Published:</strong> {{book.year}}</p>
    <p><strong>ISBN:</strong> {{book.isbn}}</p>
    <p><strong>Reviews count:</strong> {{goodread['reviews_count']}}</p>
    <p><strong>Average rating:</strong> {{goodread['average_rating']}}</p>

    <form action="{{url_for('books', book_id=book.book_id)}}" method="post">
        <div class="form-group">
            <textarea autofocus class="form-control" placeholder="Type your view." name="review" rows="8" cols="80"></textarea>
        </div>
        <div class="form-group">
            <label for="rating">Rating</label>
            <input type="range" class="form-control" name="rating" value="0" min="1" max="5">
        </div>

        <button class="btn btn-primary" type="submit">Submit</button>
    </form>
    {% if reviews %}
        <h3>Reviews:</h3>
    {% endif %}
    {% for review in reviews %}
        <p><strong>{{review.username}}: </strong>{{review.review}} <small>rating: {{review.rating}}</small></p>
    {% endfor %}
{% endblock %}
